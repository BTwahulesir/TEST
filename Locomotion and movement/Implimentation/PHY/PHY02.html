<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Student MCQ Dashboard - Physics Quiz</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f0f6fb;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  min-height: 100vh;
  align-items: flex-start;
  box-sizing: border-box;
}
.container {
  background: #fff;
  width: 85vw;
  max-width: 900px;
  margin: 20px auto;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 0 15px #a0bedf;
  display: flex;
  flex-direction: column;
}
label {
  display: block;
  font-weight: 600;
  margin: 12px 0 6px;
}
input[type=text], select {
  width: 100%;
  padding: 8px 10px;
  font-size: 1em;
  border-radius: 6px;
  border: 1px solid #ccc;
  box-sizing: border-box;
}
#startBtn {
  margin-top: 15px;
  padding: 12px 30px;
  font-size: 1.1em;
  font-weight: 700;
  border-radius: 8px;
  border: none;
  background-color: #1f71b8;
  color: white;
  cursor: pointer;
  transition: background-color 0.3s ease;
}
#startBtn:disabled {
  background-color: #a2b8d1;
  cursor: not-allowed;
}
#startBtn:not(:disabled):hover {
  background-color: #165b9d;
}
#quiz-section {
  display: none;
}
#progress {
  text-align: center;
  margin-bottom: 20px;
  color: #555;
  font-size: 1.05em;
}
.question-text {
  font-size: 1.2em;
  font-weight: 700;
  margin-bottom: 18px;
}
label.option-label {
  display: block;
  margin-bottom: 12px;
  font-size: 1.05em;
  cursor: pointer;
}
#navigation {
  text-align: center;
  margin-top: 10px;
}
.nav-btn {
  padding: 10px 22px;
  border-radius: 7px;
  border: none;
  font-weight: 600;
  font-size: 1.05em;
  margin: 0 10px;
  background-color: #1f71b8;
  color: white;
  cursor: pointer;
  transition: background-color 0.3s ease;
}
.nav-btn:hover:not(:disabled) {
  background-color: #165b9d;
}
.nav-btn:disabled {
  background-color: #a2b8d1;
  cursor: not-allowed;
}
#submitBtn {
  margin-top: 15px;
  background-color: #277b2f;
  color: white;
  font-weight: 700;
  font-size: 1.2em;
  padding: 12px 38px;
  border-radius: 8px;
  cursor: pointer;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
#submitBtn:disabled {
  background-color: #94c27a;
  cursor: not-allowed;
}
#finish-section {
  display: none;
  text-align: center;
  margin-top: 15px;
}
#piechart {
  margin: 20px auto 0 auto;
  max-width: 220px;
  max-height: 220px;
  display: block;
}
table.review-table {
  border-collapse: collapse;
  width: 100%;
  margin-top: 14px;
  font-size: 0.9em;
}
table.review-table th,
table.review-table td {
  border: 1px solid #b0b0b0;
  padding: 6px 10px;
  text-align: left;
}
table.review-table th {
  background-color: #c8e6c9;
}
.correct {
  color: #2e7d32;
  font-weight: 700;
}
.incorrect {
  color: #d32f2f;
  font-weight: 700;
}
.skipped {
  color: #1976d2;
  font-weight: 700;
}
#review-section {
  max-height: 300px;
  overflow-y: auto;
  margin-top: 15px;
  border: 1px solid #ccc;
  padding: 10px;
  background: #fafafa;
  border-radius: 6px;
}
#question-navigator {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
  justify-items: center;
  margin-left: 20px;
  max-width: 180px;
}
.q-nav-btn {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  font-weight: 700;
  font-size: 1em;
  border: none;
  cursor: pointer;
  color: white;
  box-shadow: 0 0 5px rgba(0,0,0,0.3);
  transition: transform 0.2s ease;
  user-select: none;
}
.q-nav-btn.not-attempted {
  background-color: #d32f2f; /* red */
}
.q-nav-btn.skipped {
  background-color: #1976d2; /* blue */
}
.q-nav-btn.attempted {
  background-color: #2e7d32; /* green */
}
.q-nav-btn.current {
  outline: 3px solid #000;
  transform: scale(1.3);
}
/* Final Result Card Styles */
.card {
  font-family: 'Poppins', sans-serif;
  background: white;
  border-radius: 15px;
  padding: 30px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  text-align: center;
  margin: 0 auto 20px auto;
}
.card h1 {
  font-size: 1.4rem;
  margin-bottom: 10px;
  color: #2c3e50;
}
.trophy {
  font-size: 1.5rem;
  margin: 10px 0;
}
.details {
  font-size: 0.95rem;
  color: #555;
  margin: 10px 0 20px;
  line-height: 1.6;
}
.score {
  font-size: 1.2rem;
  font-weight: 600;
  color: #d32f2f; /* red by default */
  margin-bottom: 20px;
}
.stats {
  display: flex;
  justify-content: space-between;
  margin: 15px 0 0;
  gap: 8px;
}
.stat {
  background: #f1f1f1;
  padding: 10px;
  border-radius: 10px;
  width: 33%;
  min-width: 60px;
}
.stat h3 {
  margin: 0;
  font-size: 1.15rem;
  color: #111;
}
.stat p {
  margin: 5px 0 0;
  font-size: 0.9rem;
  color: #555;
}
.stat.attempted h3,
.stat.attempted p {
  color: #1976d2; /* blue */
  font-weight: 600;
}
.stat.correct h3,
.stat.correct p {
  color: #08ad6c; /* green */
  font-weight: 600;
}
.stat.wrong h3,
.stat.wrong p {
  color: #d32f2f; /* red */
  font-weight: 600;
}
.footer {
  margin-top: 20px;
  font-size: 0.85rem;
  color: #888;
}
</style>
</head>
<body>
<div class="container">
  <h2 style="display:none;">PHYSICS TEST - VISHWAJEET SCIENCE ACADEMY</h2>
  <div id="login-section">
    <label for="rollno">Enter Roll Number (01-200)</label>
    <input type="text" id="rollno" maxlength="3" placeholder="e.g. 01" autocomplete="off" />
    <label for="batch">Select Batch</label>
    <select id="batch">
      <option value="">-- Select Batch --</option>
      <option value="11th">11th</option>
      <option value="12th">12th</option>
      <option value="NEET Repeater">NEET Repeater</option>
    </select>
    <button id="startBtn" disabled>Start Test</button>
  </div>
  <section id="quiz-section" style="display:flex; gap: 20px;">
    <div style="flex:1;">
      <div id="progress" aria-live="polite"></div>
      <div id="question-block" aria-label="Question area">
        <div class="question-text" id="question-text"></div>
        <form id="options-form"></form>
      </div>
      <div id="navigation" aria-label="Quiz navigation">
        <button id="prevBtn" class="nav-btn" disabled type="button" aria-label="Previous question">Previous</button>
        <button id="skipBtn" class="nav-btn" type="button" aria-label="Skip this question">Skip</button>
        <button id="nextBtn" class="nav-btn" disabled type="button" aria-label="Next question">Next</button>
      </div>
      <button id="submitBtn" disabled type="button" aria-label="Submit test">Submit Test</button>
    </div>
    <nav id="question-navigator" aria-label="Question navigation" role="group" tabindex="0"></nav>
  </section>
  <section id="finish-section" style="display:none;">
    <div class="card" role="region" aria-labelledby="resultTitle" tabindex="0">
      <h1 id="resultTitle">üèÜ Congratulations! Your Test has been Submitted Successfully üèÜ</h1>
      <div class="details" id="resultDetails"></div>
      <div id="resultScore" class="score"></div>
      <div class="stats" role="list">
        <div class="stat attempted" role="listitem">
          <h3 id="attemptedCount">0</h3>
          <p>Attempted</p>
        </div>
        <div class="stat correct" role="listitem">
          <h3 id="correctCount">0</h3>
          <p>Correct</p>
        </div>
        <div class="stat wrong" role="listitem">
          <h3 id="wrongCount">0</h3>
          <p>Wrong</p>
        </div>
      </div>
      <canvas id="piechart" width="220" height="220" aria-label="Pie chart of score distribution" role="img" style="margin:15px auto 0 auto;"></canvas>
      <div class="footer">Vishwajeet Science Academy ¬© 2025</div>
    </div>
    <h4>Review your answers below:</h4>
    <div id="review-section" tabindex="0" aria-live="polite"></div>
  </section>
</div>

<script>
const physicsMcqs = [
  {q:"Statement I: To cross a river in minimum time, a person should swim perpendicular to river flow. Statement II: The drift of man along the flow is independent of time.",
   a:"Statement I is correct but statement II is incorrect",
   b:"Statement II is correct but statement I is incorrect",
   c:"Both statements are incorrect",
   d:"Both statements are correct",
   ans:"a",
   expl:"Swimming perpendicular reduces crossing time; drift depends on flow and time."},

  {q:"Two springs of spring constants 1500 N/m and 3000 N/m respectively are stretched with the same force. They will have potential energy in the ratio:",
   a:"4:1", b:"1:4", c:"2:1", d:"1:2",
   ans:"b",
   expl:"Potential energy ‚àù 1/k for same force."},

  {q:"A ball is released from the top of a tower. The ratio of work done by gravity in the first, second, and third second is:",
   a:"1:2:3", b:"1:4:9", c:"1:3:5", d:"1:5:3",
   ans:"c",
   expl:"Distances fallen follow odd-number rule: 1,3,5."},

  {q:"Which of the following is the graph between the height (h) of a projectile and time (t), when it is projected from the ground?",
   a:"Parabolic", b:"Linear", c:"Symmetrical projectile curve", d:"Straight line",
   ans:"c",
   expl:"Projectile motion is a symmetrical parabola in h‚Äìt plot."},

  {q:"A particle of mass \\(m\\) at rest is acted upon by a force \\(F\\) for a time \\(t\\). Its kinetic energy after time \\(t\\) is:",
   a:"\\( \\frac{F^{2} t^{2}}{2m} \\)",
   b:"\\( \\frac{F t^{2}}{2m} \\)",
   c:"\\( \\frac{F^{2} t}{2m} \\)",
   d:"\\( \\frac{2 F^{2} t^{2}}{m} \\)",
   ans:"a",
   expl:"Using impulse-momentum: v=Ft/m, KE=1/2 m v¬≤."},

  {q:"A mass of 100 g strikes the wall with speed 5 m/s at an angle and rebounds with the same speed. If contact time is 0.01 s, what is the force applied on the mass by the wall?",
   a:"250 N to right", b:"250 N to left", c:"500 N to right", d:"500 N to left",
   ans:"a",
   expl:"Impulse = change in momentum / time."},

  {q:"The spring extends by \\(x\\) when loaded with force \\(T\\) and spring constant \\(k\\). Energy stored by the spring is:",
   a:"\\( \\frac{T^2}{2k} \\)",
   b:"\\( \\frac{kx^2}{2} \\)",
   c:"\\( \\frac{T x}{2} \\)",
   d:"All are equal",
   ans:"d",
   expl:"All expressions are equivalent via Hooke‚Äôs law."},

  {q:"A cannon ball is fired with velocity 200 m/s at 60¬∞ to the horizontal. At the highest point, it explodes into 3 equal fragments; two with 100 m/s vertically up and down, velocity of third is:",
   a:"100 m/s horizontally", b:"300 m/s horizontally", c:"300 m/s at 60¬∞", d:"200 m/s at 60¬∞",
   ans:"a",
   expl:"Horizontal momentum is conserved."},

  {q:"A particle moves in a circle of radius 0.2 m with angular velocity 5 rev/s. Average speed during one period is:",
   a:"10 m/s", b:"2 m/s", c:"3 m/s", d:"4 m/s",
   ans:"a",
   expl:"v = œâ √ó circumference = 5 rev/s √ó (2œÄ √ó 0.2)."},

  {q:"The velocity of a 100 g particle is given by v(t)=4+8t+t¬≤. Work done in first 2 s is:",
   a:"7 J", b:"14 J", c:"21 J", d:"28 J",
   ans:"b",
   expl:"Work = change in KE from t=0 to t=2."},

  {q:"Two masses m‚ÇÅ and m‚ÇÇ moving oppositely collide elastically. The ratio of final velocities is:",
   a:"1", b:"\\(\\frac{m_1}{m_2}\\)", c:"\\(\\frac{m_2}{m_1}\\)", d:"Depends on collision",
   ans:"b",
   expl:"From conservation laws in elastic collisions."},

  {q:"A body of mass m with velocity ŒΩ collides inelastically with identical mass at rest. If the first moves perpendicular with velocity ŒΩ‚ÇÅ, velocity of second is:",
   a:"\\(\\sqrt{\\nu^{2} - \\nu_{1}^{2}}\\)", b:"ŒΩ", c:"ŒΩ‚ÇÅ", d:"0",
   ans:"a",
   expl:"Use vector form of momentum conservation."},

  {q:"A bullet mass m with velocity ŒΩ embeds in a bag mass M. Combined momentum is conserved, kinetic energy:",
   a:"Decreases", b:"Constant", c:"Increases", d:"Zero",
   ans:"a",
   expl:"Inelastic collisions lose KE."},

  {q:"Loss of kinetic energy if 4 kg body moving 12 m/s collides with 6 kg at rest and sticks:",
   a:"Zero", b:"288 J", c:"172.8 J", d:"144 J",
   ans:"b",
   expl:"Calculate initial and final KE and subtract."},

  {q:"A heavy body moving 30 m/s collides elastically with a small object at rest; latter speed is:",
   a:"30 m/s", b:"60 m/s", c:"80 m/s", d:"Zero",
   ans:"a",
   expl:"Elastic collision with m‚ÇÅ >> m‚ÇÇ transfers ~2v."},

  {q:"Assertion: Work cannot be added to force. Reason: Their dimensions differ.",
   a:"Both true; Reason explains Assertion", b:"Both true; Reason does not explain Assertion",
   c:"Assertion true; Reason false", d:"Both false",
   ans:"a",
   expl:"Dimensional analysis confirms they‚Äôre different quantities."},

  {q:"A 1 kg ball moving 0.4 m/s collides with stationary ball. After collision, first ball moves at 0.3 m/s perpendicular. Momentum of second ball is:",
   a:"0.1 kg¬∑m/s", b:"0.3 kg¬∑m/s", c:"0.5 kg¬∑m/s", d:"0.7 kg¬∑m/s",
   ans:"c",
   expl:"Resultant momentum from vector difference."},

  {q:"The resultant of vectors A and B is perpendicular to B. Angle between A and B is:",
   a:"90¬∞", b:"0¬∞", c:"45¬∞", d:"60¬∞",
   ans:"a",
   expl:"R¬∑B=0 implies perpendicular."}
];


const rollInput = document.getElementById('rollno');
const batchSelect = document.getElementById('batch');
const startBtn = document.getElementById('startBtn');
const quizSection = document.getElementById('quiz-section');
const progressDiv = document.getElementById('progress');
const questionText = document.getElementById('question-text');
const optionsForm = document.getElementById('options-form');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const skipBtn = document.getElementById('skipBtn');
const submitBtn = document.getElementById('submitBtn');
const finishSection = document.getElementById('finish-section');
const resultDetails = document.getElementById('resultDetails');
const resultScore = document.getElementById('resultScore');
const attemptedCount = document.getElementById('attemptedCount');
const correctCount = document.getElementById('correctCount');
const wrongCount = document.getElementById('wrongCount');
const reviewSection = document.getElementById('review-section');
const questionNavigator = document.getElementById('question-navigator');

let currentQuestionIndex = 0;
let answers = new Array(physicsMcqs.length).fill(undefined);

function validateLoginInput() {
  const r = parseInt(rollInput.value.trim(), 10);
  startBtn.disabled = !(r >= 1 && r <= 200 && batchSelect.value);
}
rollInput.addEventListener('input', () => {
  rollInput.value = rollInput.value.replace(/\D/g, '');
  validateLoginInput();
});
batchSelect.addEventListener('change', validateLoginInput);

startBtn.addEventListener('click', () => {
  document.getElementById('login-section').style.display = 'none';
  quizSection.style.display = 'flex';
  renderNavigator();
  loadQuestion(0);
  submitBtn.disabled = true;
});

function renderNavigator() {
  questionNavigator.innerHTML = '';
  for (let i = 0; i < physicsMcqs.length; i++) {
    const btn = document.createElement('button');
    btn.textContent = i + 1;
    btn.className = 'q-nav-btn not-attempted';
    btn.dataset.index = i;
    btn.type = 'button';
    btn.onclick = () => loadQuestion(i);
    questionNavigator.appendChild(btn);
  }
}

function loadQuestion(i) {
  currentQuestionIndex = i;
  const q = physicsMcqs[i];
  questionText.textContent = `Q${i + 1}. ${q.q}`;
  optionsForm.innerHTML = '';
  ['a', 'b', 'c', 'd'].forEach(k => {
    const lbl = document.createElement('label');
    lbl.className = 'option-label';
    lbl.innerHTML = `<input type="radio" name="option" value="${k}"> (${k}) ${q[k]}`;
    optionsForm.appendChild(lbl);
  });
  const prev = answers[i];
  if (prev) {
    const radio = optionsForm.querySelector(`input[value="${prev}"]`);
    if (radio) radio.checked = true;
    nextBtn.disabled = false;
  } else {
    nextBtn.disabled = true;
  }
  progressDiv.textContent = `Question ${i + 1} of ${physicsMcqs.length}`;
  prevBtn.disabled = (i === 0);
  updateNavigatorColors();
}

optionsForm.addEventListener('change', () => {
  nextBtn.disabled = false;
});

prevBtn.onclick = () => {
  if (currentQuestionIndex > 0) loadQuestion(currentQuestionIndex - 1);
};
nextBtn.onclick = () => {
  const sel = optionsForm.querySelector('input[name="option"]:checked');
  if (sel) {
    answers[currentQuestionIndex] = sel.value;
    submitBtn.disabled = false;
  }
  if (currentQuestionIndex < physicsMcqs.length - 1) loadQuestion(currentQuestionIndex + 1);
};
skipBtn.onclick = () => {
  answers[currentQuestionIndex] = null;
  submitBtn.disabled = false;
  if (currentQuestionIndex < physicsMcqs.length - 1) loadQuestion(currentQuestionIndex + 1);
};

submitBtn.onclick = () => {
  if (confirm('Submit test?')) finalizeTest();
};

function updateNavigatorColors() {
  questionNavigator.querySelectorAll('.q-nav-btn').forEach(btn => {
    btn.classList.remove('attempted', 'skipped', 'not-attempted', 'current');
    const idx = +btn.dataset.index;
    if (idx === currentQuestionIndex) btn.classList.add('current');
    if (answers[idx] === undefined) btn.classList.add('not-attempted');
    else if (answers[idx] === null) btn.classList.add('skipped');
    else btn.classList.add('attempted');
  });
}

function finalizeTest() {
  quizSection.style.display = 'none';
  finishSection.style.display = 'block';

  const total = physicsMcqs.length;
  const correct = answers.filter((a, i) => a === physicsMcqs[i].ans).length;
  const wrong = answers.filter((a, i) => a && a !== physicsMcqs[i].ans).length;
  const skipped = answers.filter(a => a === null).length;
  const attempted = total - skipped;
  const score = correct * 4 - wrong;
  const pct = ((score / (total * 4)) * 100).toFixed(2);

  resultDetails.innerHTML = `
    <strong>Roll Number:</strong> ${rollInput.value.padStart(2, '0')}<br>
    <strong>Batch:</strong> ${batchSelect.value}
  `;
  resultScore.textContent = `Score: ${score} / ${total * 4} (${pct}%)`;
  resultScore.style.color = score >= 0 ? '#08ad6c' : '#d32f2f'; // green if positive else red
  attemptedCount.innerText = attempted;
  correctCount.innerText = correct;
  wrongCount.innerText = wrong;

  drawPieChart(correct, wrong, skipped);
  showReview();
}

function drawPieChart(c, w, s) {
  const ctx = pieCanvas.getContext('2d');
  const total = c + w + s || 1;
  const cx = pieCanvas.width / 2;
  const cy = pieCanvas.height / 2;
  const radius = 100;
  ctx.clearRect(0, 0, pieCanvas.width, pieCanvas.height);
  let startAngle = -Math.PI / 2;
  const slices = [
    { value: c, color: '#08ad6c', label: `Correct (${c})` }, // green
    { value: w, color: '#d32f2f', label: `Wrong (${w})` }, // red
    { value: s, color: '#1976d2', label: `Skipped (${s})` } // blue
  ];

  slices.forEach(slice => {
    if (slice.value === 0) return;
    const sliceAngle = (slice.value / total) * 2 * Math.PI;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, radius, startAngle, startAngle + sliceAngle);
    ctx.closePath();
    ctx.fillStyle = slice.color;
    ctx.fill();

    const midAngle = startAngle + sliceAngle / 2;
    const labelX = cx + Math.cos(midAngle) * (radius * 0.7);
    const labelY = cy + Math.sin(midAngle) * (radius * 0.7);
    ctx.fillStyle = '#000';
    ctx.font = '14px Arial';
    ctx.textAlign = 'center';
    ctx.fillText(slice.label, labelX, labelY);

    startAngle += sliceAngle;
  });
}

function showReview() {
  let html = '<table class="review-table" role="table" aria-label="Answer review"><thead><tr><th>#</th><th>Question</th><th>Your Answer</th><th>Correct Answer</th><th>Status</th><th>Explanation</th></tr></thead><tbody>';
  physicsMcqs.forEach((q, i) => {
    const userAns = answers[i];
    const yourAns = userAns === null ? 'Skipped' : userAns ? `(${userAns}) ${q[userAns]}` : 'Not attempted';
    const correctAns = `(${q.ans}) ${q[q.ans]}`;
    const status = userAns === null ? '<span class="skipped">Skipped</span>'
      : userAns === q.ans ? '<span class="correct">Correct</span>'
      : '<span class="incorrect">Wrong</span>';
    html += `<tr>
      <td>${i + 1}</td>
      <td>${q.q}</td>
      <td>${yourAns}</td>
      <td>${correctAns}</td>
      <td>${status}</td>
      <td>${q.expl}</td>
    </tr>`;
  });
  html += '</tbody></table>';
  reviewSection.innerHTML = html;
}
</script>
</body>
</html>
