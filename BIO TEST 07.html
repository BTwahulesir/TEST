<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Student MCQ Test Dashboard - Structural Organisation in Animals</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f6fb;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      min-height: 100vh;
      align-items: flex-start;
      padding-top: 20px;
    }
    .container {
      background: white;
      max-width: 750px;
      width: 95%;
      padding: 25px 30px 30px;
      border-radius: 12px;
      box-shadow: 0 0 25px #c0dbf8;
    }
    h2 {
      color: #254e7b;
      margin-bottom: 15px;
      font-size: 1.6em;
      text-align: center;
    }
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
    }
    input[type="text"], select {
      width: 100%;
      padding: 8px 10px;
      font-size: 1em;
      margin-bottom: 20px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    #startBtn {
      background: #1f71b8;
      border: none;
      color: white;
      padding: 12px 28px;
      font-weight: 700;
      font-size: 1.1em;
      border-radius: 8px;
      cursor: pointer;
      display: block;
      margin: 0 auto 10px auto;
      transition: background-color 0.3s ease;
    }
    #startBtn:hover:not(:disabled) {
      background: #125a9b;
    }
    #startBtn:disabled {
      background: #a2b8d1;
      cursor: not-allowed;
    }
    #quiz-section {
      display: none;
      margin-top: 15px;
    }
    #score {
      font-size: 1.3em;
      font-weight: 700;
      color: #2f7d32;
      margin-bottom: 12px;
      text-align: center;
    }
    #progress {
      color: #666;
      margin-bottom: 20px;
      text-align: center;
    }
    .question-text {
      font-weight: 600;
      font-size: 1.15em;
      margin-bottom: 18px;
      white-space: pre-wrap;
    }
    .option-label {
      display: block;
      margin-bottom: 10px;
      cursor: pointer;
      font-size: 1.05em;
    }
    input[type="radio"] {
      margin-right: 10px;
      cursor: pointer;
    }
    #navigation {
      margin-top: 22px;
      text-align: center;
    }
    button.nav-btn {
      background: #1f71b8;
      border: none;
      color: white;
      padding: 11px 22px;
      font-weight: 600;
      border-radius: 7px;
      margin: 0 10px;
      cursor: pointer;
      font-size: 1em;
      transition: background-color 0.3s ease;
    }
    button.nav-btn:disabled {
      background: #a2b8d1;
      cursor: not-allowed;
    }
    button.nav-btn:hover:not(:disabled) {
      background: #125a9b;
    }
    #submitBtn {
      background: #277b2f;
      margin-top: 25px;
      padding: 14px 32px;
      font-size: 1.2em;
      cursor: pointer;
      display: block;
      margin-left: auto;
      margin-right: auto;
      font-weight: 700;
      border-radius: 8px;
    }
    #submitBtn:disabled {
      background: #94c27a;
      cursor: not-allowed;
    }
    #explanation {
      background: #e2f0d9;
      border-left: 5px solid #4caf50;
      padding: 12px 15px;
      margin-top: 18px;
      font-size: 0.95em;
      display: none;
      line-height: 1.3;
    }
    #finish-section {
      display: none;
      margin-top: 15px;
      text-align: center;
    }
    #summary {
      margin: 18px 0;
      font-size: 1.1em;
      line-height: 1.4em;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    #piechart {
      margin: 20px auto;
      display: block;
      max-width: 350px;
      max-height: 350px;
    }
    table.review-table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 25px;
      font-size: 0.9em;
    }
    table.review-table th,
    table.review-table td {
      border: 1px solid #ccc;
      padding: 8px 9px;
      text-align: left;
    }
    table.review-table th {
      background: #c9deca;
    }
    .correct {
      color: #227629;
      font-weight: 700;
    }
    .incorrect {
      color: #b21d1d;
      font-weight: 700;
    }
    .skipped {
      color: #b28b23;
      font-weight: 700;
    }
    #review-section {
      max-height: 300px;
      overflow-y: auto;
      margin-top: 20px;
      border: 1px solid #ccc;
      padding: 10px;
      background: #fdfdfd;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>BIOLOGY-TEST 07-VISHWAJEET SCIENCE ACADEMY</h2>

    <div id="login-section">
      <label for="rollno">Enter Roll Number (01-200):</label>
      <input type="text" id="rollno" maxlength="3" placeholder="e.g. 01" />
      
      <label for="batch">Select Batch:</label>
      <select id="batch">
        <option value="">-- Select Batch --</option>
        <option value="11th">11th</option>
        <option value="12th">12th</option>
        <option value="NEET Repeater">NEET Repeater</option>
      </select>
      
      <button id="startBtn" disabled>Start Test</button>
    </div>

    <section id="quiz-section" aria-live="polite" role="main">
      <div id="score">Score: 0</div>
      <div id="progress"></div>

      <div id="question-block">
        <div class="question-text" id="question-text"></div>
        <form id="options-form" aria-labelledby="question-text">
          <!-- radio buttons injected here -->
        </form>
      </div>

      <div id="explanation" aria-live="polite"></div>

      <div id="navigation">
        <button id="prevBtn" class="nav-btn" disabled aria-label="Previous Question">Previous</button>
        <button id="skipBtn" class="nav-btn" aria-label="Skip Question">Skip</button>
        <button id="nextBtn" class="nav-btn" disabled aria-label="Next Question">Next</button>
      </div>

      <button id="submitBtn" disabled>Submit Test</button>
    </section>

    <section id="finish-section" role="region" aria-live="polite" aria-label="Test Results">
      <h3>Test Completed!</h3>
      <div id="summary"></div>
      <canvas id="piechart" width="350" height="350" aria-label="Score Distribution Pie Chart"></canvas>
      <h4>Review your answers below:</h4>
      <div id="review-section"></div>
    </section>
  </div>

<script>
  const mcqs = [
    {q:"Which of the following epithelium is irregularly shaped?",a:"Squamous epithelium",b:"Cuboidal epithelium",c:"Columnar epithelium",d:"Ciliated columnar epithelium",ans:"a",expl:"Squamous epithelium cells are irregularly shaped."},
    {q:"Cuboidal epithelium can be found in",a:"Distal convoluted tubule",b:"Proximal convoluted tubule",c:"Henle’s loop",d:"Both (a) and (b)",ans:"d",expl:"Cuboidal epithelium lines distal and proximal convoluted tubules."},
    {q:"In columnar epithelium, where is nucleus located?",a:"At the base",b:"In the middle",c:"At the top",d:"No nucleus is present",ans:"a",expl:"Nucleus is located at the base in columnar epithelium."},
    {q:"Which of the following is/are example of dense connective tissue?",a:"Tendon",b:"Cartilage",c:"Ligament",d:"All of these",ans:"d",expl:"Tendon, cartilage, and ligament are dense connective tissues."},
    {q:"What kind of tissue is goblet cells?",a:"Epithelial tissue",b:"Connective tissue",c:"Neural tissue",d:"All of these",ans:"a",expl:"Goblet cells are specialized epithelial cells that secrete mucus."},
    {q:"Which portion of cartilage provides it with solidity, pliability and resistance to compression?",a:"Collagen fibres",b:"Calcium content",c:"Intracellular material",d:"Chondrocytes",ans:"c",expl:"Intracellular material (matrix) provides these properties."},
    {q:"What provides bone with hard and non-pliable properties?",a:"Collagen fibres",b:"Calcium salts",c:"Both (a) and (b)",d:"None of these",ans:"b",expl:"Calcium salts make the bone hard and non-pliable."},
    {q:"Where are osteocytes located?",a:"Entire bone",b:"In lacunae",c:"Both (a) and (b)",d:"None of these",ans:"b",expl:"Osteocytes reside in lacunae of bone."},
    {q:"Which of the following is not true?",a:"Limb bones are long bones.",b:"The function of long bones is weight bearing and bringing out movement.",c:"Bone marrows in all such long bones are site of blood cells production.",d:"All of these",ans:"d",expl:"All these statements are true."},
    {q:"What is the main function of blood?",a:"Protection of body",b:"Transport of various substances",c:"pH buffering",d:"Maintaining osmolarity balance",ans:"b",expl:"Blood mainly transports substances like oxygen, nutrients, and wastes."},
    {q:"When muscle cells receive stimulus, they get _________ .",a:"Shortened",b:"Lengthened",c:"Elongated",d:"All of these",ans:"a",expl:"Muscle cells contract or shorten on stimulus."},
    {q:"Muscular movement are intended to _________ .",a:"Move the body to adjust to changes in environment",b:"Maintain the position of various body parts",c:"Both (a) and (b)",d:"None of these",ans:"c",expl:"Muscular movement enables locomotion and posture."},
    {q:"Which of the following is a typical skeletal muscle?",a:"Biceps",b:"Triceps",c:"Both (a) and (b)",d:"None of these",ans:"c",expl:"Both biceps and triceps are skeletal muscles."},
    {q:"The sheath enclosing the several bundles of muscle fibres is _________ tissue.",a:"epithelial",b:"connective",c:"both",d:"neural",ans:"b",expl:"Connective tissue sheath encloses muscle fiber bundles."},
    {q:"Which of the following is a fusiform muscle?",a:"Cardiac muscle",b:"Smooth muscle",c:"Both (a) and (b)",d:"Skeletal muscle",ans:"b",expl:"Smooth muscle fibers are fusiform (spindle-shaped)."},
    {q:"Smooth muscles are held together by _________ .",a:"Connective tissue",b:"Cell junctions",c:"Epithelial tissue",d:"None of these",ans:"b",expl:"Smooth muscles are connected by cell junctions."},
    {q:"Where can we find smooth muscles?",a:"Artery",b:"Vein",c:"Stomach",d:"All of these",ans:"d",expl:"Smooth muscles are found in arteries, veins, and stomach."},
    {q:"Assertion (A) Simple epithelium covers the surface exposed to mechanical or chemical abrasions.\nReason (R) Protection of underlying tissues is the major function of compound epithelium.\nChoose the correct answer:",a:"Both A and R are true, but R is not the correct explanation of A.",b:"A is true, but R is false.",c:"A is false, but R is true.",d:"Both A and R are true and R is the correct explanation of A",ans:"a",expl:"Simple epithelium lines surfaces; compound epithelium protects but the reason doesn't explain the assertion."},
    {q:"Assertion (A) The surplus of nutrients which are not used immediately are converted into fats and are stored in adipose tissue.\nReason (R) Adipose tissue is a type of loose connective tissue found in animals.\nChoose the correct answer:",a:"Both A and R are true, but R is not the correct explanation of A.",b:"A is true, but R is false.",c:"A is false, but R is true.",d:"Both A and R are true and R is the correct explanation of A",ans:"d",expl:"Adipose tissue stores fat and is a loose connective tissue."},
    {q:"Assertion (A) Cell junctions are present in the epithelium and other tissues.\nReason (R) Among the three cell junctions, adhering junctions help to stop substances from leaking across a tissue.\nChoose the correct answer:",a:"Both A and R are true, but R is not the correct explanation of A.",b:"A is true, but R is false.",c:"A is false, but R is true.",d:"Both A and R are true and R is the correct explanation of A",ans:"a",expl:"Adhering junctions help in adhesion but do not stop all substances from leaking; reason doesn't fully explain assertion."},
    {q:"Assertion (A) In frog, fertilisation is external.\nReason (R) The zygote of frog undergoes cleavage and develops into morula and blastula.\nChoose the correct answer:",a:"Both A and R are true, but R is not the correct explanation of A.",b:"A is true, but R is false.",c:"A is false, but R is true.",d:"Both A and R are true and R is the correct explanation of A",ans:"a",expl:"Both true but reason does not explain fertilisation type."},
    {q:"Statement I: In frog, the partially digested food called chyme is passed from the stomach to the first part of small intestine.\nStatement II: The digested food is absorbed by numerous finger-like folds present in the inner wall of intestine.\nChoose:",a:"Both statement I and II are incorrect.",b:"Statement I is correct, but statement II is incorrect",c:"Statement I is incorrect, but statement II is correct",d:"Both statement I and II are correct",ans:"d",expl:"Both statements are correct as per frog physiology."},
    {q:"Statement I: Tendons are examples of dense irregular Connective tissue.\nStatement II: The orientation of fibres showing regular or irregular pattern are called loose connective tissue.\nChoose:",a:"Both statement I and II are incorrect.",b:"Statement I is correct, but statement II is incorrect",c:"Statement I is incorrect, but statement II is correct",d:"Both statement I and II are correct",ans:"b",expl:"Tendons are dense regular connective tissue; loose connective tissue has irregular fibers."},
    {q:"Which of the following statement(s) is/are incorrect about frog?\nI. In male frog, each ureter contains a duct for transfer of sperms.\nII. Each kidney is composed of several structural and functional units called nephrons.\nIII. In females, the ureters and oviduct open separately in the cloaca.\nIV. Uric acid is formed from ammonia, which is released during deamination.\nChoose:",a:"II only",b:"I and IV",c:"IV only",d:"III and IV",ans:"b",expl:"In female frogs, ureters and oviduct open together, not separately."},
    {q:"Which of the following statements are incorrect about respiratory system of frog?\nI. Skin acts as the only respiratory organ in water only.\nII. Dissolved oxygen is exchanged through the skin by active transport in water.\nIII. Lungs are paired and present in the upper part of thorax.\nIV. On land, the buccal cavity acts as one of the respiratory organ.\nV. Pulmonary respiration occurs during hibernation and aestivation.\nChoose:",a:"II, III and IV",b:"II and V",c:"I, III and V",d:"II, IV and V",ans:"b",expl:"Oxygen exchange is by diffusion, not active transport, and pulm. respiration ceases during hibernation."},
    {q:"Which of the following statements are correct about frog?\nI. A mature female can lay around 2500 to 3000 ova at a time.\nII. Ovoid testes are found attached to the upper part of kidneys with the help of mesorchium.\nIII. Hind brain is characterised by a pair of optic lobes.\nIV. Intestinal tract is lined with striated muscles.\nV. Special venous connection called hepatic portal system is present between liver and intestine.\nChoose:",a:"I and IV",b:"I, II and V",c:"I, III and IV",d:"III, IV and V",ans:"b",expl:"Statements I, II, and V are correct."},
    {q:"The tissue that binds, supports and provides strength to other body tissues is",a:"epithelial tissue",b:"connective tissue",c:"muscular tissue",d:"nervous tissue",ans:"b",expl:"Connective tissue provides support and strength."},
    {q:"All the following connective tissues have a rich supply of blood except",a:"areolar connective tissue",b:"adipose connective tissue",c:"cartilage",d:"bone",ans:"c",expl:"Cartilage is avascular, others have rich blood supply."},
    {q:"Which of the following are connective tissue proper?",a:"Areolar and adipose tissue",b:"Blood and lymph",c:"Cartilage and bone",d:"All of these",ans:"a",expl:"Connective tissue proper includes areolar and adipose tissue."},
    {q:"Fibroblasts produce",a:"white and yellow fibers",b:"extracellular matrix",c:"both (a) and (b)",d:"neither (a) nor (b)",ans:"c",expl:"Fibroblasts synthesize fibers and matrix."},
    {q:"The cells of areolar tissue which engulf microorganisms are",a:"fibroblasts",b:"macrophages",c:"mast cells",d:"adipocytes",ans:"b",expl:"Macrophages perform phagocytosis."},
    {q:"The cells of areolar tissue which store fats are",a:"fibroblasts",b:"macrophages",c:"mast cells",d:"adipocytes",ans:"d",expl:"Adipocytes store fats."},
    {q:"The cells of areolar tissue which are found mainly surrounding blood vessels are",a:"fibroblasts",b:"macrophages",c:"mast cells",d:"adipocytes",ans:"c",expl:"Mast cells are found near blood vessels."},
    {q:"The cells of areolar tissue with many branching processes are",a:"fibroblasts",b:"macrophages",c:"mast cells",d:"adipocytes",ans:"b",expl:"Macrophages have branching processes."},
    {q:"Mast cells of areolar connective tissue secrete",a:"heparin and histamine",b:"histamine and renin",c:"heparin and fibers",d:"heparin, histamine and fibers",ans:"a",expl:"Mast cells secrete heparin and histamine."},
    {q:"Which of the following helps in dilation of blood vessels?",a:"Heparin",b:"Histamine",c:"Both (a) and (b)",d:"Neither (a) nor (b)",ans:"b",expl:"Histamine dilates blood vessels."},
    {q:"The muscles responsible for peristalsis are",a:"visceral muscles",b:"smooth muscles",c:"cardiac muscles",d:"both (a) and (b)",ans:"d",expl:"Visceral and smooth muscles cause peristalsis."},
    {q:"Myofibrils in a muscle fibre are arranged",a:"transversely",b:"longitudinally",c:"either (a) or (b)",d:"both (a) and (b)",ans:"a",expl:"Myofibrils are arranged transversely."},
    {q:"Neuroglial cells",a:"support neurons",b:"nourish neurons",c:"provide protection to neurons by phagocytosis",d:"all of these",ans:"d",expl:"Neuroglia have multiple supportive functions."},
    {q:"The membrane covering the neuron is",a:"neurilemma",b:"plasmalemma",c:"sarcolemma",d:"myolemma",ans:"a",expl:"Neurilemma covers neuron axon outside the myelin sheath."},
    {q:"The body of the neuron is",a:"perikaryon",b:"cyton",c:"soma",d:"all of these",ans:"d",expl:"All terms denote neuron cell body."},
    {q:"Nissl’s granules are rich in",a:"RNA",b:"DNA",c:"either (a) or (b)",d:"neither (a) nor (b)",ans:"a",expl:"Nissl bodies are RNA rich rough ER."},
    {q:"The thin cytoplasmic processes of neurons are",a:"dendrons",b:"axons",c:"either (a) or (b)",d:"neither (a) nor (b)",ans:"a",expl:"Dendrons are thin branched processes."},
    {q:"The thick cytoplasmic processes of neurons are",a:"dendrons",b:"axons",c:"either (a) or (b)",d:"neither (a) nor (b)",ans:"b",expl:"Axons are thick cytoplasmic projections."},
    {q:"The cytoplasmic processes that carry impulses away from the cyton are",a:"dendrons",b:"axons",c:"either (a) or (b)",d:"neither (a) nor (b)",ans:"b",expl:"Axons carry impulses away from cell body."}
  ];

  const rollInput = document.getElementById('rollno');
  const batchSelect = document.getElementById('batch');
  const startBtn = document.getElementById('startBtn');

  const quizSection = document.getElementById('quiz-section');
  const scoreDiv = document.getElementById('score');
  const progressDiv = document.getElementById('progress');
  const questionText = document.getElementById('question-text');
  const optionsForm = document.getElementById('options-form');
  const explanationDiv = document.getElementById('explanation');

  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const skipBtn = document.getElementById('skipBtn');
  const submitBtn = document.getElementById('submitBtn');

  const finishSection = document.getElementById('finish-section');
  const summaryDiv = document.getElementById('summary');
  const pieCanvas = document.getElementById('piechart');
  const reviewSection = document.getElementById('review-section');

  let currentQuestionIndex = 0;
  let answers = new Array(mcqs.length).fill(null); // null = skipped

  // Validate roll and batch inputs
  function validateLoginInput() {
    const roll = rollInput.value.trim();
    const rollNum = parseInt(roll, 10);
    const batch = batchSelect.value;
    if (roll.length > 0 && !isNaN(rollNum) && rollNum >= 1 && rollNum <= 200 && batch !== '') {
      startBtn.disabled = false;
    } else {
      startBtn.disabled = true;
    }
  }

  rollInput.addEventListener('input', () => {
    rollInput.value = rollInput.value.replace(/[^0-9]/g, '');
    validateLoginInput();
  });

  batchSelect.addEventListener('change', () => {
    validateLoginInput();
  });

  startBtn.addEventListener('click', () => {
    document.getElementById('login-section').style.display = 'none';
    quizSection.style.display = 'block';
    loadQuestion();
    updateButtons();
    updateScore();
  });

  function loadQuestion() {
    const q = mcqs[currentQuestionIndex];
    questionText.textContent = `Q${currentQuestionIndex + 1}. ${q.q}`;
    optionsForm.innerHTML = '';
    ['a', 'b', 'c', 'd'].forEach(opt => {
      const label = document.createElement('label');
      label.className = 'option-label';
      label.htmlFor = `option-${opt}`;
      label.innerHTML = `<input type="radio" name="option" id="option-${opt}" value="${opt}"> (${opt}) ${q[opt]}`;
      optionsForm.appendChild(label);
    });

    explanationDiv.style.display = 'none';
    progressDiv.textContent = `Question ${currentQuestionIndex + 1} of ${mcqs.length}`;
    nextBtn.disabled = true;

    if (answers[currentQuestionIndex] !== null) {
      const selectedRadio = document.getElementById(`option-${answers[currentQuestionIndex]}`);
      if (selectedRadio) {
        selectedRadio.checked = true;
        nextBtn.disabled = false;
        showExplanationText();
      }
    }
  }

  optionsForm.addEventListener('change', () => {
    nextBtn.disabled = false;
  });

  prevBtn.addEventListener('click', () => {
    if (currentQuestionIndex > 0) {
      currentQuestionIndex--;
      loadQuestion();
      updateButtons();
      updateScore();
    }
  });

  nextBtn.addEventListener('click', () => {
    const selected = document.querySelector('input[name="option"]:checked');
    if (!selected) return;

    answers[currentQuestionIndex] = selected.value;
    showExplanationText();
    updateScore();

    if (currentQuestionIndex < mcqs.length -1) {
      currentQuestionIndex++;
      loadQuestion();
      updateButtons();
    } else {
      nextBtn.disabled = true;
    }
  });

  skipBtn.addEventListener('click', () => {
    answers[currentQuestionIndex] = null;
    explanationDiv.style.display = 'none';
    updateScore();

    if (currentQuestionIndex < mcqs.length -1) {
      currentQuestionIndex++;
      loadQuestion();
      updateButtons();
    }
  });

  submitBtn.addEventListener('click', () => {
    if (confirm('Are you sure you want to submit the test?')) {
      finalizeTest();
    }
  });

  function showExplanationText() {
    const q = mcqs[currentQuestionIndex];
    const ans = answers[currentQuestionIndex];
    const isCorrect = ans === q.ans;
    const yourAnsText = ans ? `${ans}. ${q[ans]}` : 'No answer selected';
    explanationDiv.innerHTML = `
        <b>Correct Answer:</b> (${q.ans}) ${q[q.ans]}<br />
        <b>Your Answer:</b> ${yourAnsText}<br />
        <b>Explanation:</b> ${q.expl}<br />
        <span style="color:${isCorrect ? '#228b22' : '#b22222'}; font-weight:bold;">
          ${isCorrect ? '+4 marks' : (ans ? '-1 mark' : 'Skipped')}
        </span>`;
    explanationDiv.style.display = 'block';
  }

  function updateScore() {
    const {correctCount, wrongCount} = calculateStats();
    const totalScore = (correctCount * 4) - (wrongCount * 1);
    scoreDiv.textContent = `Score: ${totalScore}`;
  }

  function calculateStats() {
    let correctCount = 0, wrongCount = 0, attemptedCount = 0;
    answers.forEach((ans, i) => {
      if (ans !== null) {
        attemptedCount++;
        if (ans === mcqs[i].ans) correctCount++;
        else wrongCount++;
      }
    });
    return {correctCount, wrongCount, attemptedCount};
  }

  function updateButtons() {
    prevBtn.disabled = currentQuestionIndex === 0;
    const selectedOption = document.querySelector('input[name="option"]:checked');
    nextBtn.disabled = !selectedOption;
    submitBtn.disabled = false;
  }

  function finalizeTest() {
    quizSection.style.display = 'none';
    finishSection.style.display = 'block';

    const {correctCount, wrongCount, attemptedCount} = calculateStats();
    const skippedCount = mcqs.length - attemptedCount;
    const totalScore = (correctCount * 4) - (wrongCount * 1);
    const percentage = ((totalScore / (mcqs.length * 4)) * 100).toFixed(2);
    const accuracy = attemptedCount === 0 ? 0 : ((correctCount / attemptedCount) * 100).toFixed(2);

    summaryDiv.innerHTML = `
      <p><strong>Roll Number:</strong> ${rollInput.value.padStart(2,'0')}</p>
      <p><strong>Batch:</strong> ${batchSelect.value}</p>
      <p><strong>Total Score:</strong> ${totalScore} out of ${mcqs.length * 4}</p>
      <p><strong>Percentage:</strong> ${percentage}%</p>
      <p><strong>Accuracy (Correct/Attempted):</strong> ${accuracy}%</p>
      <p><strong>Attempted Questions:</strong> ${attemptedCount}</p>
      <p><strong>Skipped Questions:</strong> ${skippedCount}</p>
      <p><strong>Right Answers:</strong> ${correctCount}</p>
      <p><strong>Wrong Answers:</strong> ${wrongCount}</p>
    `;

    drawPieChart(correctCount, wrongCount, skippedCount);
    generateReviewTable();
  }

  function drawPieChart(right, wrong, skipped) {
    const canvas = pieCanvas;
    const ctx = canvas.getContext('2d');
    const total = right + wrong + skipped;
    const cx = canvas.width / 2;
    const cy = canvas.height / 2;
    const radius = Math.min(cx, cy) - 30;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.font = '16px Arial';
    ctx.textAlign = 'center';

    const slices = [
      {value:right, color:'#4caf50', label:`Right (${right})`},
      {value:wrong, color:'#e53935', label:`Wrong (${wrong})`},
      {value:skipped, color:'#ffb300', label:`Skipped (${skipped})`}
    ];

    let startAngle = -0.5 * Math.PI;
    slices.forEach(slice => {
      if(slice.value===0) return;
      const sliceAngle = (slice.value / total) * 2 * Math.PI;

      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.arc(cx, cy, radius, startAngle, startAngle + sliceAngle);
      ctx.closePath();

      ctx.fillStyle = slice.color;
      ctx.fill();

      const midAngle = startAngle + sliceAngle / 2;
      const labelX = cx + Math.cos(midAngle) * (radius / 1.5);
      const labelY = cy + Math.sin(midAngle) * (radius / 1.5);

      ctx.fillStyle = '#000';
      ctx.fillText(slice.label, labelX, labelY);

      startAngle += sliceAngle;
    });
  }

  function generateReviewTable() {
    let html = '<table class="review-table"><thead><tr><th>Q no.</th><th>Question</th><th>Your Answer</th><th>Correct Answer</th><th>Status</th></tr></thead><tbody>';
    answers.forEach((ans, i) => {
      const q = mcqs[i];
      let yourAnsText = (ans === null) ? 'Skipped' : `(${ans}) ${q[ans]}`;
      let correctAnsText = `(${q.ans}) ${q[q.ans]}`;
      let status = ans === null ? '<span class="skipped">Skipped</span>' : (ans === q.ans ? '<span class="correct">Correct</span>' : '<span class="incorrect">Wrong</span>');
      html += `<tr><td>${i+1}</td><td>${q.q}</td><td>${yourAnsText}</td><td>${correctAnsText}</td><td>${status}</td></tr>`;
    });
    html += '</tbody></table>';
    reviewSection.innerHTML = html;
  }

  validateLoginInput();
</script>
</body>
</html>
